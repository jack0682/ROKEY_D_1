#!/bin/bash
# run_new_real_robot.sh - μƒλ΅μ΄ κµ¬μ΅° μ‹¤μ  λ΅λ΄‡ μ—°κ²°

echo "π¨ μƒλ΅μ΄ κµ¬μ΅° μ‹¤μ  λ΅λ΄‡ λ¨λ“ - μ•μ „ μ£Όμμ‚¬ν•­ ν™•μΈ!"
echo "1. λ΅λ΄‡ μ „μ› λ° λ„¤νΈμ›ν¬ μ—°κ²° ν™•μΈ (192.168.1.100)"
echo "2. μ‹¤μ‹κ°„ μ μ–΄ μΈν„°νμ΄μ¤ μ—°κ²° ν™•μΈ (192.168.1.50)"
echo "3. μ‘μ—…κ³µκ°„ λ‚΄ μ¥μ• λ¬Ό μ κ±°"
echo "4. λΉ„μƒ μ •μ§€ λ²„νΌ μ„μΉ ν™•μΈ"
echo ""

read -p "μ„ μ‚¬ν•­μ„ λ¨λ‘ ν™•μΈν–μµλ‹κΉ? (yes/no): " confirm
if [[ $confirm != "yes" ]]; then
    echo "μ•μ „ ν™•μΈ ν›„ λ‹¤μ‹ μ‹¤ν–‰ν•΄μ£Όμ„Έμ”."
    exit 1
fi

echo "π”— λ΅λ΄‡ μ μ–΄κΈ° μ—°κ²° ν™•μΈ μ¤‘..."
if ! ping -c 1 192.168.1.100 >/dev/null 2>&1; then
    echo "β λ΅λ΄‡ μ μ–΄κΈ°μ— μ—°κ²°ν•  μ μ—†μµλ‹λ‹¤ (192.168.1.100)"
    echo "λ„¤νΈμ›ν¬ μ„¤μ •μ„ ν™•μΈν•΄μ£Όμ„Έμ”."
    exit 1
fi

echo "π”— μ‹¤μ‹κ°„ μ μ–΄ μΈν„°νμ΄μ¤ μ—°κ²° ν™•μΈ μ¤‘..."
if ! ping -c 1 192.168.1.50 >/dev/null 2>&1; then
    echo "β μ‹¤μ‹κ°„ μ μ–΄ μΈν„°νμ΄μ¤μ— μ—°κ²°ν•  μ μ—†μµλ‹λ‹¤ (192.168.1.50)"
    echo "μ‹¤μ‹κ°„ μ μ–΄ λ„¤νΈμ›ν¬ μ„¤μ •μ„ ν™•μΈν•΄μ£Όμ„Έμ”."
    exit 1
fi

echo "β… λ΅λ΄‡ μ—°κ²° ν™•μΈλ¨"
source install/setup.bash

echo "π¤– μ‹¤μ  λ΅λ΄‡κ³Ό μ—°κ²°ν•μ—¬ μ‹μ¤ν… μ‹μ‘..."
ros2 launch dsr_bringup2 dsr_bringup2_rviz.launch.py \
    name:=dsr01 \
    model:=m1013 \
    host:=192.168.1.100 \
    rt_host:=192.168.1.50 \
    mode:=real \
    gui:=true
